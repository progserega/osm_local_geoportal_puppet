Шаблоны puppet для установки сервера рендеринга OSM-тайлов (проверялось на debian x86/amd64).

Реализует задачу:
1. Отрисовка TMS-слоя локальной копии данных OSM (по-умолчанию восток России).
2. Отрисовку WMS-слоёв корпоративных данных
3. Регулярное обновление данных корпоративных и OSM в соответствующие раздельные базы.

Шаблоном ставится:
1. mod_tile для TMS слоёв
2. tilecache для WMS слоёв
3. kothic для конвертации mapcss стилей в mapnik-стили и создание из них конфига для tilecache.


Логика установки:
1. На сервере баз данных (предполагается как отдельный сервер), должны быть созданы три postgis-базы: корпоративная база (по умолчанию drsk_gis) - для хранения корпоративных гео-данных, база хранения копии данных OSM, для отрисовки слоя карты ОСМ (local_osm_gis) и временная база для загрузки данных OSM (local_som_gis_tmp). 
2. Ставятся и патчатся (патчи приложены) mod_tile, mapnik, tilecache, kothic.
3. Настраивается их взаимодействие.
4. По умолчанию, заядя на этот сервер через веб - должна открыться leaflet-страничка с картой и слоями, которые будет рисовать данный сервер.

П.С.:
1. Иногда под конец почему-то не запускается скрипт /opt/osm/mapnik/create_osm_xml_config.sh, так и не понял почему. Его можно запустить потом вручную.
2. Применение шаблона отрабатывает достаточно долго, т.к. ставится достаточно много пакетов, а так же скачиваются границы мира и карты субъектов для загрузки в базу.
3. В моём случае в данных шаблонах есть небольшие привязки на использование прокси-сервера. В принципе их можно убрать, если внутри компании не используется http-прокси для доступа в интернет.
4. Автор не так давно начал использовать puppet, потому шаблоны могут быть неоптимальными.
5. В файле manifests/nodes/osm-render.rs.int.pp описано как можно подключить этот шаблон, в том числе там наследуется основной шаблон для хостов, в котором уже подключаются настройки прокси-сервера.

Надеюсь этот шаблон и патчи из него кому-то помогут. :-)
